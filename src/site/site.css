:root {
  --re-bg: radial-gradient(1600px 800px at 20% 10%, rgba(255,255,255,0.06), transparent 60%),
            radial-gradient(1200px 600px at 80% -10%, rgba(163,149,255,0.08), transparent 55%),
            #0d0f16;
}
.re-shell { display: grid; grid-template-columns: 1fr clamp(420px, 38vw, 800px); min-height: 100vh; background: var(--re-bg); max-width: 1600px; margin: 0 auto; gap: 28px; padding: 0 16px; }
.re-right { border-left: 1px solid rgba(255,255,255,.12); padding: 18px 12px; backdrop-filter: blur(6px); position: sticky; top: 0; height: 100vh; overflow: hidden; }
.re-left { border-right: 1px solid rgba(255,255,255,.08); padding: 18px 12px; backdrop-filter: blur(6px); }
.assistant-sidebar { display: grid; grid-template-rows: auto auto 1fr; gap: 6px; height: 100%; }
.assistant-globe { display: grid; place-items: center; transform: scale(.8); transform-origin: top center; }
.assistant-chat { overflow: visible; display:flex; flex-direction: column; min-height: 0; }

/* Chat window scroller styling */
.assistant-scroll [data-slot="scroll-area-viewport"] { height: 100%; overflow-y: auto; -webkit-overflow-scrolling: touch; overscroll-behavior: contain; }
.assistant-scroll [data-slot="scroll-area-scrollbar"] {
  width: 8px;
}
.assistant-scroll [data-slot="scroll-area-thumb"] {
  background-color: rgba(255,255,255,0.35);
  border-radius: 9999px;
}
.assistant-scroll [data-slot="scroll-area-viewport"]::-webkit-scrollbar {
  width: 8px;
}
.assistant-scroll [data-slot="scroll-area-viewport"]::-webkit-scrollbar-thumb {
  background-color: rgba(255,255,255,0.35);
  border-radius: 9999px;
}
.assistant-scroll [data-slot="scroll-area-viewport"]::-webkit-scrollbar-track {
  background: transparent;
}

/* Toolbar / header for sidebar */
.assistant-toolbar {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  padding: calc(8px + env(safe-area-inset-top, 0)) 6px 6px;
  position: sticky;
  top: 0;
  z-index: 30; /* ensure it stays above the scroller */
  background: rgba(0,0,0,0.18);
  backdrop-filter: blur(6px);
}
.assistant-toolbar-center { justify-self: center; }
.assistant-toolbar-right { justify-self: end; }
.assistant-toolbar-title {
  font-weight: 700;
  font-size: 13px;
  color: rgba(255,255,255,0.9);
  padding: 6px 10px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.12);
}
.assistant-toggle { display:flex; align-items:center; gap: 8px; color: rgba(255,255,255,0.85); font-size: 12px; }

/* Labeled switch inside the track for Voice/Chat */
.switch-labeled { position: relative; display: inline-block; }
.switch-labeled [data-slot="switch"] { position: relative; cursor: pointer; z-index: 2; }
.switch-labeled .label { pointer-events: none; z-index: 1; }

/* Segmented pill toggle */
.seg-toggle {
  position: relative;
  display: grid;
  grid-template-columns: 1fr 1fr;
  align-items: center;
  width: min(220px, 70vw);
  height: 38px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.06);
  backdrop-filter: blur(6px);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
}

@media (max-width: 420px) {
  .seg-toggle { height: 34px; width: min(200px, 80vw); }
  .seg-toggle .seg-btn { font-size: 11px; }
}
.seg-toggle .seg-btn {
  position: relative;
  z-index: 2;
  height: 100%;
  border: 0;
  background: transparent;
  color: rgba(255,255,255,0.85);
  font-weight: 700;
  font-size: 12px;
  letter-spacing: .2px;
  cursor: pointer;
  border-radius: 999px;
  outline: none;
}
.seg-toggle .seg-btn:focus-visible { box-shadow: 0 0 0 3px rgba(168,85,247,0.35) inset; }
.seg-toggle .seg-btn.active { color: #0b0b0f; }
.seg-toggle .seg-active {
  position: absolute;
  top: 3px;
  left: 3px;
  width: calc(50% - 6px);
  height: calc(100% - 6px);
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(168,85,247,0.95), rgba(236,72,153,0.95));
  box-shadow: 0 10px 22px rgba(236,72,153,0.35);
  transition: transform 180ms ease;
}

@media (prefers-reduced-motion: reduce) {
  .seg-toggle .seg-active { transition: none; }
}
.switch-labeled .label {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 10px;
  font-weight: 700;
  letter-spacing: .2px;
  color: rgba(255,255,255,0.8);
  text-shadow: 0 1px 2px rgba(0,0,0,0.35);
  opacity: .45;
  pointer-events: none;
  user-select: none;
  transition: opacity 160ms ease;
}
.switch-labeled .label-left { left: 8px; }
.switch-labeled .label-right { right: 8px; }
.switch-labeled .label.active { opacity: 1; }

/* Chat input styling */
.assistant-input {
  margin-top: 8px;
  display: flex;
  gap: 10px;
  align-items: center;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: 14px;
  padding: 10px 10px 10px 12px;
  transition: border-color 160ms ease, box-shadow 160ms ease, background 200ms ease;
}
.assistant-input:focus-within {
  border-color: rgba(168, 85, 247, 0.7);
  box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.25);
  background: rgba(255,255,255,0.08);
}
.assistant-input .assistant-input-icon {
  width: 16px; height: 16px; color: rgba(255,255,255,0.75);
}
.assistant-input input {
  flex: 1;
  background: transparent;
  color: #fff;
  border: 0;
  outline: none;
  font-size: 14px;
  min-height: 40px;
}
.assistant-send {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.16);
  background: linear-gradient(135deg, rgba(168,85,247,0.9), rgba(236,72,153,0.9));
  color: #fff;
  cursor: pointer;
  transition: transform 120ms ease, opacity 120ms ease, box-shadow 160ms ease;
}
.assistant-send:hover { box-shadow: 0 6px 18px rgba(168,85,247,0.25); transform: translateY(-1px); }
.assistant-send:active { transform: translateY(0); }
.assistant-send:disabled { opacity: 0.6; cursor: not-allowed; }
.assistant-send .assistant-send-icon { width: 16px; height: 16px; }

/* Typing indicator */
.assistant-typing {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 6px;
  color: rgba(255,255,255,0.75);
  font-size: 12px;
  padding-bottom: env(safe-area-inset-bottom, 0);
}
.spinner { animation: spin 1s linear infinite; width: 14px; height: 14px; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Bouncing dots loader */
.assistant-dots { display:flex; align-items:center; gap:6px; height: 14px; }
.assistant-dots span {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(255,255,255,0.85);
  display: inline-block;
  animation: bounce 1s ease-in-out infinite;
}
.assistant-dots span:nth-child(1) { animation-delay: 0s; }
.assistant-dots span:nth-child(2) { animation-delay: .15s; }
.assistant-dots span:nth-child(3) { animation-delay: .3s; }
@keyframes bounce {
  0%, 80%, 100% { transform: translateY(0); opacity: .9; }
  40% { transform: translateY(-6px); opacity: 1; }
}

.re-main { padding: 10px 24px 40px; display: flex; justify-content: center; }
.re-pane { background:#fff; color:#0d0f16; border-radius:20px; box-shadow:0 20px 60px rgba(0,0,0,.25); padding: 18px 22px 28px; border:1px solid rgba(255,255,255,.08); max-width: 1100px; width: 100%; margin: 0 auto; }
.re-nav { display:flex; justify-content: space-between; align-items:center; padding: 16px 0; }
.re-nav .brand { font-weight: 800; font-size: 20px; color: #0f172a; letter-spacing: .2px; }
.re-nav nav { display:flex; gap: 18px; }
.re-nav a { color: #111827; text-decoration:none; font-size: 14px; font-weight:600 }
.re-hero { margin: 14px 0 18px; padding: 26px; border: 1px solid rgba(255,255,255,.08); border-radius: 16px; background: rgba(255,255,255,.03); color:#eaf1ff }
.re-hero { background:#fff; border:1px solid #e5e7eb; color:#111827 }
.re-hero h1 { margin: 0 0 6px; font-size: 32px; }
.re-hero p { margin: 0 0 16px; color: #4b5563; }
.re-search { display:flex; gap: 10px; }
.re-search input { flex:1; padding: 12px 14px; border-radius: 10px; border:1px solid #e5e7eb; background:#fff; color:#111827 }
.re-search button { padding: 12px 16px; border-radius:10px; background:#ef4444; color:#fff; border:1px solid #dc2626; cursor:pointer; font-weight:700 }

.re-section { margin-top: 22px; }
.re-section h2 { color:#111827; margin:0 0 12px; font-size: 20px; }
.re-grid { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 14px; }
.re-grid-3 { grid-template-columns: repeat(3,minmax(0,1fr)); }
.re-card { border:1px solid #e5e7eb; border-radius: 14px; overflow:hidden; background:#fff; }
.re-card .img { height:140px; background-size: cover; background-position: center; }
.re-card .info { padding:10px 12px; }
.re-card .title { color:#111827; font-weight:700; margin-bottom: 4px; }
.re-card .sub { color:#6b7280; font-size: 13px; }

.re-agent { display:flex; gap:10px; align-items:center; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px; background: rgba(255,255,255,.03); color:#eaf1ff }
.re-agent .avatar { width:40px; height:40px; border-radius:50%; background: linear-gradient(135deg,#9b5cff,#ff7fb1); }

.re-cta { margin-top: 24px; display:flex; justify-content: space-between; align-items:center; border:1px solid #e5e7eb; border-radius:14px; padding:16px 18px; background:#fff; color:#111827 }
.re-cta button { padding:10px 14px; border-radius:10px; background:#ef4444; color:#fff; border:1px solid #dc2626; cursor:pointer; font-weight:700 }
.re-footer { color:#6b7280; margin-top: 20px; font-size: 12px; }

@media (max-width: 1100px) {
  .re-shell { grid-template-columns: 1fr; }
  .re-right { order: 2; border-left: none; border-top: 1px solid rgba(255,255,255,.08); position: static; height: auto; overflow: visible; }
  .re-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
  .re-search { flex-wrap: wrap; }
  .re-search input { flex: 1 1 calc(50% - 10px); }
}

@media (max-width: 780px) {
  .re-grid { grid-template-columns: 1fr; }
  .re-grid-3 { grid-template-columns: 1fr; }
  .re-search input { flex: 1 1 100%; }
  .re-search button { width: 100%; }
}

/* Additional responsiveness for Aurora Estates */
@media (max-width: 1280px) {
  .re-grid { grid-template-columns: repeat(3, minmax(0,1fr)); }
}

@media (max-width: 980px) {
  .re-nav { flex-wrap: wrap; gap: 10px; }
  .re-nav nav { width: 100%; justify-content: center; display: flex; flex-wrap: wrap; gap: 12px; }
  .re-hero h1 { font-size: 28px; }
  .re-hero p { font-size: 14px; }
  .re-pane { padding: 14px 16px 22px; }
  .re-card .img { height: 130px; }
}

@media (max-width: 640px) {
  .re-search { flex-direction: column; gap: 8px; }
  .re-search input { flex: 1 1 100%; }
  .re-nav .brand { font-size: 18px; }
  .re-card .img { height: 110px; }
}
